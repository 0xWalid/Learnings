# ðŸš¨ Lab: SQL Injection in WHERE Clause (Retrieve Hidden Data)

A booleanâ€‘based SQL injection vulnerability inside the `category` parameter allowed retrieval of products normally hidden from the user.

---

## ðŸ“Œ 1. Observation

- The page displayed products based on the `category` parameter in the URL:
/filter?category=gift
- Changing the value to numeric value changed the list of items shown.
- Entering a **double quote (")** reflected normally on the page.
- Entering a **single quote (')** caused an **internal server error**, breaking the SQL query.
- This proved the input was directly used in a backend SQL statement without sanitization.
- The parameterâ€™s behaviour strongly suggested a backend LIKE/WHERE query selecting products by category.

---

## ðŸ§  2. Hypothesis

- The backend likely uses a query similar to:

```sql
SELECT * FROM products WHERE category = '<user_input>';
```

Because the page changed output based on input AND broke on `'`, it meant:

- User input is inserted inside quotes.
- The query is not parameterized.
- The WHERE clause can be manipulated using boolean logic.
Therefore, injecting `' OR 1=1--` should return all products, including hidden ones.

**Hypothesis:** The category parameter is vulnerable to booleanâ€‘based SQL injection that can force the query to always return true.

## ðŸ§ª 3. Test (Experiments Conducted)

### **Test 1 â€” Reflection + Behavior**

- **Input:** `1`
- **Expected:** Category mismatch or empty results.
- **Actual:** Products Disappeared.
- **Interpretation:** Parameter influences SQL filtering.

### **Test 2 â€” Double Quote**

- **Input:** `"`
- **Expected:** Possible break.
- **Actual:** Reflected safely.
- **Interpretation:** Backend treats input loosely; no strict typing.

### **Test 3 â€” Single Quote**

- **Input:** `'`
- **Expected:** Query break.
- **Actual:** Internal server error.
- **Interpretation:** Confirms the input is injected inside an SQL string.

### **Test 4 â€” Boolean Injection**

- **Input:**
    
    ```sql
    '+OR+1=1--
    ```
    
- **Expected:** Return all products.
- **Actual:** Hidden products appeared.
- **Interpretation:** Query successfully bypassed filtering.

## ðŸ“Š 4. Result

### **Payload Used**

```sql
'+OR+1=1--
```

### **What Happened**

- The injected OR condition (`1=1`) forced the WHERE clause to always evaluate to true.
- The `-` comment truncated the rest of the backend SQL.
- The page now listed **all products**, including ones normally hidden.

### âœ” Proof of Lab Completion

- Hidden products appeared in the product list.
- Lab objective completed exactly as required.
- Screenshot:

![image.png](attachment:cd8b5ce4-572a-419b-975e-c69c02e6aabd:image.png)

## ðŸŽ“ 5. Learning (Deep Reasoning)

- **Single quote (`'`) breaking the page** proves the parameter is wrapped inside SQL string quotes.
- **Double quote not breaking it** hints the backend is not enforcing correct typing.
- **Booleanâ€‘based SQLi** is effective when:
    - The input is part of a comparison.
    - The query expects a single value, not a full SELECT statement.
- Multiâ€‘SELECT attempts fail because the query structure expects a single expression, not a full different query.

## ðŸ”® 6. Future Pattern Detection

From now on, similar vulnerability signals include:

- Input affects query output directly.
- Input shows visible page changes.
- Injecting `'` breaks the page.
- Error messages or internal server errors appear on malformed input.

These are **universal red flags** for SQLi vulnerabilities in real apps.

## ðŸ§­ 7. Notes for My Future Self

- Early tests with `'` and `"` save time.
- Always observe reflection patterns before brute forcing payloads.
- Treat input-output behavior as xâ€‘ray vision into backend logic.
